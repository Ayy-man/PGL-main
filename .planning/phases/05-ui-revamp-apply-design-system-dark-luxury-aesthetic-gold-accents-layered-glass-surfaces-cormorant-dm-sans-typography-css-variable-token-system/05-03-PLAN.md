---
phase: 05-ui-revamp
plan: 03
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - src/components/layout/sidebar.tsx
  - src/components/layout/nav-items.tsx
  - src/components/layout/mobile-sidebar.tsx
  - src/app/[orgId]/layout.tsx
  - src/app/admin/layout.tsx
autonomous: true
requirements:
  - UI-04
  - UI-03
must_haves:
  truths:
    - "Sidebar is 220px with gradient background and gold accent line on right edge"
    - "Active nav item has gold background, gold text, and gold left-border accent"
    - "Top bar is 56px sticky with semi-transparent backdrop blur"
    - "Ambient gold glow radials are visible on the root background"
    - "Footer shows app name and version in ghost text opacity"
    - "Page content area has page-enter fade animation"
  artifacts:
    - path: "src/components/layout/sidebar.tsx"
      provides: "220px gradient sidebar with gold accent line and footer"
      contains: "220px"
    - path: "src/components/layout/nav-items.tsx"
      provides: "Active nav items with gold left-border accent"
      contains: "gold"
    - path: "src/app/[orgId]/layout.tsx"
      provides: "Ambient glow elements, top bar, page-enter wrapper"
      contains: "ambient-glow"
  key_links:
    - from: "src/components/layout/sidebar.tsx"
      to: "src/app/globals.css"
      via: "Sidebar background uses --bg-sidebar CSS variable"
      pattern: "bg-sidebar"
    - from: "src/app/[orgId]/layout.tsx"
      to: "src/app/globals.css"
      via: "Ambient glow classes defined in globals.css utilities"
      pattern: "ambient-glow"
---

<objective>
Rebuild the application shell — sidebar, top bar, ambient background, and page transitions.

Purpose: The shell wraps every page. Updating it applies the design system's spatial and atmospheric treatment globally.

Output: Gradient sidebar with gold accent, sticky top bar with backdrop blur, ambient gold glow, and page-enter animations on all tenant pages.
</objective>

<execution_context>
@/Users/aymanbaig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/aymanbaig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@design-system/MASTER.md
@src/components/layout/sidebar.tsx
@src/components/layout/nav-items.tsx
@src/components/layout/mobile-sidebar.tsx
@src/app/[orgId]/layout.tsx
@src/app/admin/layout.tsx

# Depends on Plan 01 for CSS variables
# Reference 05-01-SUMMARY.md if available
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rebuild sidebar with gradient background, gold accent line, and active nav states</name>
  <files>src/components/layout/sidebar.tsx, src/components/layout/nav-items.tsx, src/components/layout/mobile-sidebar.tsx</files>
  <action>
**Sidebar (src/components/layout/sidebar.tsx):**

Rebuild the sidebar per MASTER.md Section 9 "Sidebar (220px)":

1. Width: Set to `220px` explicitly (use `style={{ width: "220px" }}` or `w-[220px]`)
2. Background: Use `style={{ background: "var(--bg-sidebar)" }}` for gradient (Tailwind bg- cannot render gradient CSS variables)
3. Right border: `style={{ borderRight: "1px solid var(--border-sidebar)" }}` for the gold accent line
4. Structure (top to bottom):
   - **Team header:** 36px icon container with gold gradient background (`style={{ background: "linear-gradient(135deg, rgba(212,175,55,0.2), rgba(212,175,55,0.05))" }}`), tenant name at `text-sm font-semibold text-foreground`, subtitle at `text-[11px] uppercase tracking-wider` in `text-[var(--gold-text)]`
   - **Navigation items:** Render via NavItems component (see below)
   - **Footer:** At bottom (`mt-auto`), app name "Phronesis" + version "v1.0" in `text-[var(--text-ghost)] text-[11px]`
5. Full height: `h-screen` or `min-h-screen`, `sticky top-0`
6. Hidden on mobile: `hidden lg:flex flex-col`

**NavItems (src/components/layout/nav-items.tsx):**

Update nav item styling:
- **Active state:** `bg-[var(--gold-bg)] text-[var(--gold-primary)]` with a 3px gold left border: use `border-l-[3px] border-[var(--gold-primary)]` on the active item
- **Inactive state:** `text-[var(--text-secondary-ds)]` with hover: `hover:bg-[rgba(255,255,255,0.02)] hover:text-foreground`
- **All items:** `rounded-[8px] px-3 py-2.5 text-sm font-medium transition-all duration-200 cursor-pointer`
- Icons: `h-4 w-4 shrink-0` inside flex row with `gap-3`
- Ensure Lucide React icons only

**MobileSidebar (src/components/layout/mobile-sidebar.tsx):**

Mirror the desktop sidebar styling inside the Sheet/drawer:
- Same gradient background, gold accent line, team header, nav items
- Only visible on `< lg` breakpoints
  </action>
  <verify>
    <automated>cd "/Users/aymanbaig/Desktop/Manual Library/Phronesis-main" && grep -q "220px\|bg-sidebar" src/components/layout/sidebar.tsx && grep -q "gold" src/components/layout/nav-items.tsx && echo "PASS" || echo "FAIL"</automated>
  </verify>
  <done>Sidebar is 220px with gradient background and gold accent line. Active nav items show gold background, text, and left-border accent. Footer shows app name in ghost text. Mobile sidebar mirrors desktop.</done>
</task>

<task type="auto">
  <name>Task 2: Add ambient glow, top bar, and page-enter animation to tenant and admin layouts</name>
  <files>src/app/[orgId]/layout.tsx, src/app/admin/layout.tsx</files>
  <action>
**Tenant layout (src/app/[orgId]/layout.tsx):**

1. **Ambient glow:** Add two decorative div elements inside the layout, before the main content area:
```tsx
<div className="ambient-glow-top" aria-hidden="true" />
<div className="ambient-glow-bottom" aria-hidden="true" />
```
These classes are defined in globals.css (from Plan 01).

2. **Top bar (56px, sticky):** Add a top bar component above the main content area (inside the content column, after sidebar):
```tsx
<header
  className="sticky top-0 z-30 flex h-14 items-center justify-between px-6 border-b"
  style={{
    background: "rgba(8,8,10,0.8)",
    backdropFilter: "blur(12px)",
    borderColor: "var(--border-subtle)",
  }}
>
  {/* Left: Command palette search placeholder */}
  <div className="flex items-center gap-2 rounded-[8px] px-3 py-1.5 text-sm text-muted-foreground cursor-pointer" style={{ width: "320px", background: "var(--bg-input)", border: "1px solid var(--border-subtle)" }}>
    <Search className="h-4 w-4 shrink-0" />
    <span>Search...</span>
    <kbd className="ml-auto rounded border border-border/50 bg-muted px-1.5 py-0.5 text-[10px] font-mono text-muted-foreground">⌘K</kbd>
  </div>
  {/* Right: Notification bell + user avatar */}
  <div className="flex items-center gap-3">
    <button className="rounded-[8px] p-2 text-muted-foreground hover:text-foreground hover:bg-[rgba(255,255,255,0.03)] transition-colors cursor-pointer" aria-label="Notifications">
      <Bell className="h-4 w-4" />
    </button>
    {/* User avatar placeholder - will use real user data */}
    <div className="h-8 w-8 rounded-full bg-muted border border-border" />
  </div>
</header>
```

Import `Search` and `Bell` from `lucide-react`.

3. **Page-enter animation:** Wrap the `{children}` slot in a div with `className="page-enter"`:
```tsx
<main className="flex-1 overflow-y-auto">
  <div className="page-enter p-6">
    {children}
  </div>
</main>
```

4. **Root background:** Set the body/root container background to `var(--bg-root)` via `style={{ backgroundColor: "var(--bg-root)" }}` on the outermost flex container.

5. **Layout structure:** The layout should be:
```
<div flex min-h-screen bg-root>
  <ambient-glow-top />
  <ambient-glow-bottom />
  <div flex relative z-10>
    <Sidebar />
    <div flex-1 flex-col>
      <TopBar />
      <main>
        <div page-enter>
          {children}
        </div>
      </main>
    </div>
  </div>
</div>
```

**Admin layout (src/app/admin/layout.tsx):**

Apply the same treatment:
- Ambient glow divs
- Top bar (can be simpler — no command palette, just "Admin Dashboard" text on left)
- Page-enter animation on children
- Root background `var(--bg-root)`
- Update any admin sidebar references to use gradient background
  </action>
  <verify>
    <automated>cd "/Users/aymanbaig/Desktop/Manual Library/Phronesis-main" && grep -q "ambient-glow\|page-enter" src/app/\\[orgId\\]/layout.tsx && grep -q "ambient-glow\|page-enter\|bg-root" src/app/admin/layout.tsx && echo "PASS" || echo "FAIL"</automated>
  </verify>
  <done>Both tenant and admin layouts have ambient gold glow, sticky top bar with backdrop blur, page-enter animation on children, and --bg-root background. Layout structure matches MASTER.md specification.</done>
</task>

</tasks>

<verification>
1. Sidebar renders at 220px width with visible gradient and gold right-edge line
2. Active nav item shows gold background and left border accent
3. Top bar is 56px, sticky, with backdrop blur visible when scrolling
4. Ambient glow gradients render as subtle gold tints in top-right and bottom-left
5. Page content fades in on mount
6. `npx next build` compiles without errors
</verification>

<success_criteria>
- Sidebar: 220px, gradient bg, gold accent line, team header, ghost footer
- Nav items: Gold active state with left-border, muted inactive with hover
- Top bar: 56px sticky, backdrop blur, command palette placeholder, notification bell, user avatar
- Ambient glow: Two fixed radial gradients, pointer-events none
- Page transitions: 0.4s fadeIn on every page mount
- Both tenant and admin layouts updated
</success_criteria>

<output>
After completion, create `.planning/phases/05-ui-revamp-apply-design-system-dark-luxury-aesthetic-gold-accents-layered-glass-surfaces-cormorant-dm-sans-typography-css-variable-token-system/05-03-SUMMARY.md`
</output>
