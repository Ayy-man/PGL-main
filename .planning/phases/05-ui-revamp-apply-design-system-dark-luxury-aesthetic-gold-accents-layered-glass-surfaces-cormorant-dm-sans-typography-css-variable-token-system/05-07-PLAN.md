---
phase: 05-ui-revamp
plan: 07
type: execute
wave: 4
depends_on: ["05-03", "05-04", "05-05", "05-06"]
files_modified:
  - src/components/admin/enrichment-health-chart.tsx
  - src/components/admin/funnel-chart.tsx
  - src/components/admin/tenant-heatmap.tsx
  - src/components/admin/error-feed.tsx
  - src/components/charts/usage-chart.tsx
  - src/app/admin/tenants/page.tsx
  - src/app/admin/users/page.tsx
  - src/app/admin/tenants/new/page.tsx
  - src/app/admin/users/new/page.tsx
autonomous: false
requirements:
  - UI-01
must_haves:
  truths:
    - "No raw hex colors (#18181b, #3f3f46, #f4f4f5, #a1a1aa, #f4d47f) remain in Recharts components"
    - "All Recharts style props use var(--gold-primary), var(--foreground), var(--muted-foreground) CSS variable references"
    - "Admin table pages use design system tokens (no zinc-*, gray-*, etc.)"
    - "Admin form pages use design system input/button styles"
    - "Visual checkpoint confirms dark luxury aesthetic across all pages"
  artifacts:
    - path: "src/components/admin/funnel-chart.tsx"
      provides: "Funnel chart with CSS variable color references"
      contains: "var(--"
    - path: "src/components/admin/enrichment-health-chart.tsx"
      provides: "Enrichment chart with CSS variable color references"
      contains: "var(--"
    - path: "src/app/admin/tenants/page.tsx"
      provides: "Tenant list page with design system tokens"
  key_links:
    - from: "src/components/admin/funnel-chart.tsx"
      to: "src/app/globals.css"
      via: "Recharts style props reference CSS variables from globals.css"
      pattern: "var\\(--gold"
---

<objective>
Migrate all remaining admin components from hardcoded hex colors to CSS variable references, update admin table/form pages, and perform visual verification.

Purpose: The admin chart components (Recharts) and table pages contain the last remaining hardcoded color values. This plan closes the gap and verifies the complete design system application.

Output: All admin components using design system tokens, zero raw hex/zinc/gray classes remaining, visual verification of the complete UI.
</objective>

<execution_context>
@/Users/aymanbaig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/aymanbaig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@design-system/MASTER.md
@design-system/pages/dashboard.md
@src/components/admin/enrichment-health-chart.tsx
@src/components/admin/funnel-chart.tsx
@src/components/admin/tenant-heatmap.tsx
@src/components/admin/error-feed.tsx
@src/components/charts/usage-chart.tsx
@src/app/admin/tenants/page.tsx
@src/app/admin/users/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Recharts components and admin pages from hardcoded hex to CSS variables</name>
  <files>src/components/admin/enrichment-health-chart.tsx, src/components/admin/funnel-chart.tsx, src/components/admin/tenant-heatmap.tsx, src/components/admin/error-feed.tsx, src/components/charts/usage-chart.tsx, src/app/admin/tenants/page.tsx, src/app/admin/users/page.tsx, src/app/admin/tenants/new/page.tsx, src/app/admin/users/new/page.tsx</files>
  <action>
**Recharts components — replace inline hex strings:**

Per RESEARCH.md Pattern 4 (Recharts special case), Recharts `contentStyle`, `LabelList style`, `Cell fill`, and `Tooltip` props are JS style objects — they cannot use Tailwind classes but CAN use `var()` CSS variable references.

In ALL Recharts components (`enrichment-health-chart.tsx`, `funnel-chart.tsx`, `tenant-heatmap.tsx`, `usage-chart.tsx`):

1. Replace `contentStyle` in Tooltip:
   ```typescript
   contentStyle={{
     backgroundColor: "var(--card)",
     border: "1px solid var(--border)",
     borderRadius: "8px",
     color: "var(--foreground)",
   }}
   ```

2. Replace `LabelList` style props:
   - `style={{ fill: "#a1a1aa" }}` -> `style={{ fill: "var(--muted-foreground)" }}`
   - `style={{ fill: "#f4f4f5" }}` -> `style={{ fill: "var(--foreground)" }}`
   - `style={{ fill: "#18181b" }}` -> `style={{ fill: "var(--background)" }}`

3. Replace `Cell fill` props:
   - Any `#f4d47f` or `#d4af37` fill -> `"var(--gold-primary)"`
   - Any hardcoded OKLCH-adjacent grays -> use `"var(--muted-foreground)"` or `"var(--foreground)"`

4. Replace bar/line fill colors:
   - Gold-adjacent fills -> `"var(--gold-primary)"` at appropriate opacity
   - Success fills -> `"var(--success)"`
   - Destructive fills -> `"var(--destructive)"`

5. Replace `itemStyle` and `labelStyle` on legend/axis components similarly.

**Note:** The funnel-chart.tsx has an OKLCH gold-adjacent palette (graduated lightness). Replace with `var(--gold-primary)` at different opacities or keep the existing OKLCH values if they were intentionally graduated — but replace any hex values like `#18181b`, `#3f3f46`, `#f4f4f5`, `#a1a1aa`.

**error-feed.tsx:**

Replace any raw color classes:
- `text-red-*` -> `text-destructive`
- `bg-red-*` -> `bg-destructive/15`
- `border-red-*` -> `border-destructive/30`
- `text-zinc-*` -> `text-foreground` or `text-muted-foreground`

**Admin table pages (tenants/page.tsx, users/page.tsx):**

Apply dashboard.md "Table Improvements":
- Header cells: `text-[11px] font-semibold uppercase tracking-wider text-muted-foreground`
- Row borders: `border-b border-border/50`
- Row hover: `hover:bg-muted/30`
- Replace any raw `zinc-*`, `gray-*`, `green-*`, `red-*` classes with design system tokens
- Status badges: Use Badge component with semantic variants (success/warning/destructive)

**Admin form pages (tenants/new/page.tsx, users/new/page.tsx):**

- Page titles: `font-serif text-[22px] font-semibold text-foreground`
- Input fields: `bg-[var(--bg-input)] border-[var(--border-default)] rounded-[8px]` — or use existing shadcn Input (which should inherit from updated CSS variables)
- Submit buttons: Use `variant="gold"`
- Form cards: Use `surface-card` treatment
- Replace any raw color classes with design system tokens
  </action>
  <verify>
    <automated>cd "/Users/aymanbaig/Desktop/Manual Library/Phronesis-main" && ! grep -rn "#18181b\|#3f3f46\|#f4f4f5\|#a1a1aa" src/components/admin/ src/components/charts/ 2>/dev/null && echo "PASS: No hardcoded hex in charts" || echo "FAIL: Hardcoded hex still present"</automated>
  </verify>
  <done>All Recharts components use var() CSS variable references instead of hardcoded hex. Admin table pages use design system tokens for headers, borders, and hover states. Admin form pages use surface-card treatment and gold submit buttons. Zero raw hex colors remain in admin components.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Visual verification of complete design system application</name>
  <files>N/A — visual verification only</files>
  <action>
Deploy to Vercel or run `npx next dev` locally and verify the complete UI revamp:
1. Login page — DM Sans body font, dark background (#08080a)
2. Sidebar — gradient background, gold accent line, gold active nav item
3. Top bar — 56px sticky, backdrop blur, command palette placeholder
4. Ambient glow — subtle gold radials in top-right and bottom-left
5. Search page — persona card grid (not dropdown), Cormorant headings, gold corner accents
6. Search results — prospect cards (not table), avatars, contact icons, wealth tier badges
7. Prospect slide-over — 480px panel from right, 7 sections
8. Lists — horizontal full-width cards, Cormorant names, gold member counts
9. Dashboard — Cormorant greeting, persona cards as body
10. Analytics — Cormorant 36px stat values, gold for non-zero
11. Admin — no raw gray/zinc colors, Cormorant stat values
12. Custom scrollbar — 6px gold-tinted thumb
13. Page transitions — subtle fade-in on navigation
  </action>
  <verify>
    <automated>cd "/Users/aymanbaig/Desktop/Manual Library/Phronesis-main" && npx next build 2>&1 | tail -5</automated>
  </verify>
  <done>Visual verification confirms dark luxury aesthetic with gold accents across all pages. Build compiles without errors. User approves the UI revamp.</done>
</task>

</tasks>

<verification>
1. `grep -rn "#18181b\|#3f3f46\|#f4f4f5\|#a1a1aa" src/components/admin/ src/components/charts/` returns zero matches
2. `grep -rn "zinc-\|gray-[0-9]" src/app/admin/` returns zero matches (excluding comments)
3. All Recharts Tooltip contentStyle uses `var(--card)` not hardcoded hex
4. Visual verification confirms dark luxury aesthetic with gold accents across all pages
5. `npx next build` compiles without errors
</verification>

<success_criteria>
- Zero hardcoded hex colors in Recharts components (replaced with var() references)
- Zero raw zinc-*/gray-*/green-*/red-*/blue-*/orange-* classes in admin pages
- Admin tables use design system header/border/hover patterns
- Admin forms use surface-card treatment and gold CTAs
- Visual verification confirms complete design system application across all pages
- Build compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/05-ui-revamp-apply-design-system-dark-luxury-aesthetic-gold-accents-layered-glass-surfaces-cormorant-dm-sans-typography-css-variable-token-system/05-07-SUMMARY.md`
</output>
