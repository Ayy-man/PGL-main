# Plan 07-05: Build Verification + Design System Compliance Audit

---
wave: 3
depends_on:
  - 07-03
  - 07-04
files_modified: []
autonomous: true
---

## Goal

Run build verification, confirm all layout changes compile cleanly, and audit the shell against the design system compliance checklist from the research document. Fix any regressions or compliance issues found.

## must_haves

- `pnpm build` passes with zero errors and zero warnings
- No TypeScript type errors in modified files
- All design system compliance checks pass (see checklist below)
- No duplicate ambient glow divs anywhere in the app
- All nav items link to real routes (no 404s)
- Mobile responsive: both tenant and admin layouts work at <1024px

## Tasks

<task id="07-05-T1">
<title>Run pnpm build and fix any errors</title>
<description>
Run `pnpm build` from the project root. If any errors appear:
1. Read the error message carefully
2. Fix the issue in the relevant file
3. Re-run `pnpm build` until it passes cleanly

Common potential issues:
- Unused imports (removed `Search`/`Bell` from tenant layout but forgot to clean up)
- Missing import for `TopBar`
- Type mismatch on TopBar props
- `exact` field added to NAV_ITEMS but not typed in the array definition
</description>
</task>

<task id="07-05-T2">
<title>Design system compliance audit</title>
<description>
Manually verify each item against the design system (from 07-RESEARCH.md compliance checklist):

1. **Sidebar background:** Must use `var(--bg-sidebar)` (gradient, never flat) -- check both tenant and admin sidebar
2. **Sidebar right border:** Must use `var(--border-sidebar)` (gold-tinted) -- check both
3. **Nav active state:** `var(--gold-bg)` background + `var(--gold-primary)` text + 3px gold left border -- check nav-items.tsx and admin-nav-links.tsx
4. **Nav inactive hover:** `rgba(255,255,255,0.02)` bg + `var(--text-primary-ds)` text via onMouseEnter -- check both
5. **Team header icon:** 36px gold gradient circle -- check sidebar.tsx (h-9 w-9 = 36px)
6. **TopBar height:** 56px (h-14) -- check top-bar.tsx
7. **TopBar background:** `rgba(8,8,10,0.8)` + `backdrop-filter: blur(12px)` -- check top-bar.tsx
8. **TopBar bottom border:** `var(--border-subtle)` -- check top-bar.tsx
9. **All icons:** Lucide only, `h-4 w-4 shrink-0` for nav items -- check nav-items.tsx, admin-nav-links.tsx
10. **Mobile breakpoint:** sidebar hidden below `lg` (1024px), hamburger shown -- check sidebar.tsx and admin layout
11. **Page content:** `page-enter` class applied -- check both layouts
12. **No raw Tailwind color classes** in new or modified markup -- grep for zinc-, gray-, emerald-, yellow- in modified files
13. **No scale transforms on hover** -- verify no `scale-` classes in modified files

If any check fails, fix the issue in the relevant file. After fixes, re-run `pnpm build` to ensure no regressions.
</description>
</task>

<task id="07-05-T3">
<title>Verify route mapping completeness</title>
<description>
Confirm that every nav item in both tenant and admin sidebars links to a real page:

**Tenant nav (nav-items.tsx):**
1. Dashboard -> `src/app/[orgId]/page.tsx` EXISTS
2. Lead Discovery -> `src/app/[orgId]/search/` EXISTS
3. Personas -> `src/app/[orgId]/personas/` EXISTS
4. Lists -> `src/app/[orgId]/lists/` EXISTS
5. Activity -> `src/app/[orgId]/dashboard/activity/` EXISTS
6. Analytics -> `src/app/[orgId]/dashboard/analytics/` EXISTS

**Admin nav (admin-nav-links.tsx):**
1. Dashboard -> `src/app/admin/page.tsx` EXISTS
2. Tenants -> `src/app/admin/tenants/` EXISTS
3. Users -> `src/app/admin/users/` EXISTS
4. Analytics -> `src/app/admin/analytics/` EXISTS

If any route is missing, flag it as a blocker (do NOT create stub pages in this plan â€” that would be a scope violation).
</description>
</task>

## Verification

- `pnpm build` exits with status 0
- All 13 design system compliance items pass
- All 10 nav links map to existing route files
- No regressions from Phase 6 or earlier phases
