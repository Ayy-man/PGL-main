# Plan 09-01: Extract Profile Sub-Components (ProfileHeader, ProfileTabs, ActivityTimeline)

```yaml
wave: 1
depends_on: []
files_modified:
  - src/components/prospect/profile-header.tsx
  - src/components/prospect/profile-tabs.tsx
  - src/components/prospect/activity-timeline.tsx
autonomous: true
requirements:
  - PROF-01
  - PROF-06
  - PROF-09
  - PROF-10
```

## Goal

Create three new presentational sub-components that the refactored ProfileView will compose. These are pure rendering components with no data fetching. They follow the design-system/pages/prospect-detail.md Section 4c spec exactly.

## must_haves

- ProfileHeader renders 64px avatar, 28px Cormorant name, title+company with centered dot, metadata badges, stale data warning, action buttons (Mail/Phone/MoreHorizontal), "Add to List" button, "Find Lookalikes" button, "Draft Outreach" disabled gold button
- ProfileTabs renders sticky tab bar with 6 tabs (Overview, Activity, SEC Filings, Enrichment, Notes, Lists), gold underline on active tab, tab state via `activeTab`/`setActiveTab` props
- ActivityTimeline renders vertical line with event circles colored by action type (search=info, enrich=gold, note=muted, list=success), event title + relative timestamp, empty state if no events

## Tasks

<task id="09-01-T1">
**Create `src/components/prospect/profile-header.tsx`**

Build the ProfileHeader component matching Section 4c "Profile Header" spec:

- Props: `prospect` (full Prospect type), `isStale` (boolean), `onFindLookalikes` (callback), `onAddToList` (callback), `orgId` (string)
- Avatar: 64px round div with initials, `rounded-full border-2 border-border`, background `var(--bg-card-gradient)`; use `getInitials()` + `getAvatarGradient()` from prospect-card.tsx pattern
- Name: `font-serif text-[28px] font-bold text-foreground` (Cormorant Garamond)
- Title + Company: `text-sm text-muted-foreground`, joined with `\u00B7` centered dot
- Location: MapPin icon + `text-sm text-muted-foreground`
- Created date: `text-xs text-muted-foreground`
- Stale data warning: `inline-flex items-center gap-2 rounded-md border border-warning/30 bg-warning-muted px-3 py-1.5 text-xs text-warning`
- Action buttons (right side): Mail / Phone / MoreHorizontal using ghost button style: `flex h-9 items-center gap-2 rounded-[8px] border border-border px-3 text-sm text-muted-foreground transition-colors cursor-pointer hover:bg-accent hover:text-foreground`
- "Add to List" button: outline style with Plus icon
- "Find Lookalikes" button: outline style with UserSearch icon
- "Draft Outreach" button: gold variant button, `disabled` with `opacity-50 cursor-not-allowed`, tooltip text "Coming Soon"
- Container: `py-7 px-14`, `bg-gradient-to-b from-card to-background`, `border-b border-border`
- Skip collaborator overlapping avatars (no data model exists, per research Open Question 4)
- All icons from lucide-react, `shrink-0`
- `"use client"` directive (has onClick handlers)

Token compliance:
- No raw zinc-* classes, no inline hex values
- Use CSS variable tokens via style attributes per established project pattern
- `font-serif` not `font-cormorant`
</task>

<task id="09-01-T2">
**Create `src/components/prospect/profile-tabs.tsx`**

Build the ProfileTabs component matching Section 4c "Tab Bar" spec:

- Props: `activeTab` (union type of 6 tab names), `onTabChange` (callback)
- Tab names: `"overview" | "activity" | "sec-filings" | "enrichment" | "notes" | "lists"`
- Container: `sticky z-10 flex gap-0 border-b border-border px-14`, background `var(--background)`
- Each tab button: `relative pb-3 pt-4 text-sm capitalize transition-colors duration-200 cursor-pointer mr-6`
- Active tab: `color: var(--text-primary-ds)`, fontWeight 500, gold underline `absolute bottom-0 left-0 right-0 h-0.5` with `background: var(--gold-primary)`
- Inactive tab: `color: var(--text-secondary-ds)`, fontWeight 400
- Tab label: format tab name by replacing hyphens with spaces (e.g., "sec-filings" -> "sec filings")
- `"use client"` directive (has onClick handlers)
- Export `ProfileTabName` type for reuse

Token compliance:
- Use `var(--text-primary-ds)` / `var(--text-secondary-ds)` via style attributes (per Phase 5 decision about CSS variable hover states)
- Use `var(--gold-primary)` for active underline via style attribute
- Use `var(--background)` for sticky background via style attribute
</task>

<task id="09-01-T3">
**Create `src/components/prospect/activity-timeline.tsx`**

Build the ActivityTimeline component matching Section 4c "Left Column: Activity Timeline" spec:

- Props: `events` array of `{ id: string; action_type: string; user_id: string; created_at: string; metadata?: Record<string, unknown> }`
- Vertical line: `absolute left-4 top-0 bottom-0 w-px bg-border`
- Each event: `relative pl-8 pb-6`
- Event circle: 10px (`h-[10px] w-[10px]`), `absolute left-[13px] top-0 rounded-full`, colored by action_type:
  - `search_executed`, `lookalike_search`: `var(--info)` (blue)
  - `profile_enriched`: `var(--gold-primary)` (gold)
  - `note_added`: muted-foreground color
  - `add_to_list`, `remove_from_list`, `status_updated`: `var(--success)` (green)
  - `profile_viewed`: `var(--text-tertiary)` (subtle)
  - Default: `var(--text-muted)` (muted)
- Event title: `text-sm text-foreground`, descriptive label derived from action_type (e.g., "Profile viewed", "Enrichment triggered", "Added to list")
- Event timestamp: `text-xs text-muted-foreground`, formatted as relative date
- Empty state: "No activity recorded yet" message
- `"use client"` directive (uses formatRelativeDate utility)
- Import/reuse `formatRelativeDate` or duplicate the small utility inline

Token compliance:
- Event circle colors via inline style with CSS variables
- No raw color classes
</task>

## Verification

- [ ] `pnpm tsc --noEmit` passes with no errors for all three new files
- [ ] ProfileHeader accepts Prospect type and renders avatar, name, title, action buttons
- [ ] ProfileTabs renders 6 tabs with gold underline on active tab
- [ ] ActivityTimeline renders vertical line with colored event circles
- [ ] All three components use `"use client"` directive
- [ ] No raw zinc-*, no inline hex values, no `font-cormorant` class
- [ ] All clickable elements have `cursor-pointer`
- [ ] All icon-only buttons have `aria-label`
