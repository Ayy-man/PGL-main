---
phase: 14.1-admin-dashboard-rebuild-match-stitch-mockup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/admin/admin-nav-links.tsx
  - src/app/admin/layout.tsx
  - src/app/admin/admin-mobile-sidebar.tsx
autonomous: true
requirements: [SA-01, SA-05]

must_haves:
  truths:
    - Admin sidebar shows two sections "Platform Control" and "System Config" separated by a divider
    - "Platform Control" section has 3 items — Command Center, Tenant Registry, Usage Metrics
    - "System Config" section has 4 stub items — Global API Keys, Master Data Schema, Security Policies, Integrations
    - System Config items are NOT Next.js Links — they render as non-navigating elements with title="Coming soon"
    - Sidebar footer shows styled user card with avatar initials circle, "Super Admin" label, and user email
    - Mobile sidebar (AdminMobileSidebar) inherits same nav structure and footer user card automatically via shared components
  artifacts:
    - src/app/admin/admin-nav-links.tsx
    - src/app/admin/layout.tsx
    - src/app/admin/admin-mobile-sidebar.tsx
  key_links:
    - AdminNavLinks renders both sections — reused by desktop sidebar AND mobile Sheet
    - layout.tsx footer user card replaces bare email text
    - AdminMobileSidebar passes user data for footer card
---

<objective>
Update the admin sidebar navigation and footer to match the stitch mockup's two-section nav ("Platform Control" + "System Config") and styled Super Admin user card.

Purpose: The mockup shows a richer sidebar with 7 nav items across two labeled sections and a polished user identity card in the footer — the current sidebar only has 4 items in one section with a bare email.

Output: Updated AdminNavLinks (2 sections, 7 items), updated layout.tsx footer (user card), updated AdminMobileSidebar (pass user props for card).
</objective>

<execution_context>
@/Users/aymanbaig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/aymanbaig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@.planning/phases/14.1-admin-dashboard-rebuild-match-stitch-mockup/14.1-RESEARCH.md

@src/app/admin/admin-nav-links.tsx
@src/app/admin/layout.tsx
@src/app/admin/admin-mobile-sidebar.tsx
@design-system/MASTER.md

<interfaces>
<!-- Current AdminNavLinks exports a single function component, no props. -->
<!-- Current layout.tsx: requireSuperAdmin() returns user with .email, .fullName -->
<!-- Current AdminMobileSidebar accepts { userEmail: string } -->

From src/app/admin/admin-nav-links.tsx:
```typescript
export function AdminNavLinks() { ... }
// Uses: Link, usePathname, Building2, Users, LayoutDashboard, BarChart3
// Renders: "Platform Control" section header + 4 nav items (Dashboard, Tenants, Users, Analytics)
// Active state: gold bg + gold left-border, onMouseEnter/Leave for CSS variable hover
```

From src/app/admin/layout.tsx:
```typescript
export default async function AdminLayout({ children }: { children: React.ReactNode })
// requireSuperAdmin() -> user with .email, .fullName
// userName = user.fullName || user.email || "Admin"
// userInitials = userName.charAt(0).toUpperCase() || "A"
// Footer: bare <p> with user.email in --text-ghost
```

From src/app/admin/admin-mobile-sidebar.tsx:
```typescript
export function AdminMobileSidebar({ userEmail }: AdminMobileSidebarProps)
// Renders: Sheet with AdminNavLinks + footer with userEmail
```
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rebuild AdminNavLinks with two sections + System Config stubs</name>
  <files>src/app/admin/admin-nav-links.tsx</files>
  <action>
Rewrite `admin-nav-links.tsx` to render two nav sections matching the mockup sidebar:

**Section 1: "Platform Control"** (existing items, renamed to match mockup):
```typescript
const ADMIN_NAV_PLATFORM = [
  { label: "Command Center", href: "/admin",           icon: LayoutDashboard, exact: true },
  { label: "Tenant Registry", href: "/admin/tenants",  icon: Building2,       exact: false },
  { label: "Usage Metrics",   href: "/admin/analytics", icon: BarChart3,      exact: false },
];
```

**Section 2: "System Config"** (new stub items — these are NON-NAVIGATING):
```typescript
const ADMIN_NAV_SYSTEM = [
  { label: "Global API Keys",    icon: Key },
  { label: "Master Data Schema", icon: Database },
  { label: "Security Policies",  icon: Shield },
  { label: "Integrations",       icon: Plug },
];
```

**Implementation details:**
1. Import new Lucide icons: `Key`, `Database`, `Shield`, `Plug` (in addition to existing)
2. Remove the `Users` icon import — the "Users" nav item is dropped (mockup does not have it)
3. Platform Control section: keep exact same active/inactive rendering pattern with `<Link>`, `isActive` check, gold bg active state, `onMouseEnter`/`onMouseLeave` for CSS variable hover
4. Between sections: render a divider `<div className="my-3 mx-3" style={{ borderTop: "1px solid var(--border-subtle)" }} />`
5. "System Config" section header: same style as "Platform Control" — `text-[10px] font-semibold uppercase tracking-widest` with `color: var(--text-ghost)`
6. System Config items: render as `<button>` elements (NOT `<Link>`) with `onClick={(e) => e.preventDefault()}`, `title="Coming soon"`, `cursor-default` (not pointer), `opacity-60`. Same flex/gap/padding pattern as Platform Control items but NO active state logic. Hover: same onMouseEnter/Leave pattern but with reduced opacity.
7. Keep "use client" directive.
  </action>
  <verify>
    <automated>cd "/Users/aymanbaig/Desktop/Manual Library/Phronesis-main" && npx tsc --noEmit --pretty 2>&1 | head -30</automated>
  </verify>
  <done>
AdminNavLinks renders 2 sections (Platform Control with 3 Link items, System Config with 4 stub button items), separated by a divider. System Config items show "Coming soon" tooltip and do not navigate. No TypeScript errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update layout.tsx footer user card + AdminMobileSidebar props</name>
  <files>src/app/admin/layout.tsx, src/app/admin/admin-mobile-sidebar.tsx</files>
  <action>
**layout.tsx changes:**

1. Replace the sidebar footer (the `<div className="mt-auto px-5 py-4">` block containing bare email text) with a styled user card matching the mockup:

```tsx
<div className="mt-auto px-4 py-4">
  <div
    className="rounded-lg p-3 flex items-center gap-3"
    style={{
      background: "rgba(255,255,255,0.05)",
      border: "1px solid var(--border-subtle)",
    }}
  >
    <div
      className="size-8 rounded-full flex items-center justify-center text-xs font-bold shrink-0"
      style={{
        background: "var(--gold-bg-strong)",
        color: "var(--gold-primary)",
        border: "1px solid var(--border-gold)",
      }}
    >
      {userInitials}
    </div>
    <div className="overflow-hidden min-w-0">
      <p
        className="text-sm font-medium truncate"
        style={{ color: "var(--text-primary-ds)" }}
      >
        Super Admin
      </p>
      <p
        className="text-xs truncate"
        style={{ color: "var(--text-ghost)" }}
      >
        {user.email}
      </p>
    </div>
  </div>
</div>
```

2. Update the `AdminMobileSidebar` call to pass `userName` and `userInitials` in addition to `userEmail`:
```tsx
<AdminMobileSidebar userEmail={user.email} userName={userName} userInitials={userInitials} />
```

**admin-mobile-sidebar.tsx changes:**

1. Update interface to accept new props:
```typescript
interface AdminMobileSidebarProps {
  userEmail: string;
  userName: string;
  userInitials: string;
}
```

2. Destructure the new props: `({ userEmail, userName, userInitials })`

3. Replace the footer `<p>` element with the same styled user card as layout.tsx (copy the exact JSX from above), using `userInitials` for the avatar and `userEmail` for the email display.

**Do NOT touch:**
- The sidebar header ("PGL" / "Admin Console" section)
- The `<nav>` section (AdminNavLinks handles itself)
- The TopBar component or its props
- The `requireSuperAdmin()` auth logic
  </action>
  <verify>
    <automated>cd "/Users/aymanbaig/Desktop/Manual Library/Phronesis-main" && npx tsc --noEmit --pretty 2>&1 | head -30</automated>
  </verify>
  <done>
Sidebar footer shows styled user card with gold avatar initials circle, "Super Admin" label, and email. Mobile sidebar receives and renders the same user card. No TypeScript errors.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with zero errors
2. AdminNavLinks renders two sections with divider
3. System Config items are `<button>` elements, not `<Link>`, with title="Coming soon"
4. Sidebar footer shows user card with avatar, "Super Admin", email — both desktop and mobile
5. No raw hex colors or Material Symbols icons used
</verification>

<success_criteria>
- Admin sidebar matches mockup nav structure: 2 sections, 7 items total
- System Config links are stubs (non-navigating, coming soon tooltip)
- Footer user card displays avatar initials, "Super Admin" label, email
- Mobile sidebar inherits all changes via shared components
- TypeScript compiles cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/14.1-admin-dashboard-rebuild-match-stitch-mockup/14.1-01-SUMMARY.md`
</output>
